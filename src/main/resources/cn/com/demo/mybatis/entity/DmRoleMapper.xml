<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.com.demo.mybatis.dao.IDmRoleDAO">
	<resultMap type="DmRole" id="DmRoleMap">
	   <id column="rl_id" property="rlId"/>
	   <result column="rl_name" property="rlName"/>
	   <result column="rl_remark" property="rlRemark"/>
	   
	   <collection property="dmUsers"
	               ofType="DmUser"
	               column="rl_id"
	               select="cn.com.demo.mybatis.dao.IDmUserDAO.findUsersByRoleId"></collection>
	</resultMap>
	
	<select id="findById" parameterType="int" resultMap="DmRoleMap">
	   select * from dm_role where rl_id=#{rlId}
	</select>
	<select id="findRolesByUserId" parameterType="int" resultMap="DmRoleMap">
	   select rl.* from dm_role rl inner join map_ur_rl mp on rl.rl_id=mp.mp_rl_id
	   where mp.mp_ur_id=#{urId}
	</select>
	
</mapper>